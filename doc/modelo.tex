\section{Modelado}

\subsection{Choferes}
Las siguientes entidades abarcan los requerimientos listados como 1.I

\startEntity{Chofer}
\addEntityPk{DNI}
\addEntityField{apellido}
\addEntityField{nombre}
\addEntityField{fechaNacimiento}
\addEntityField{domicilio}
\addEntityField{telefono}
\printEntity{
PK = \{DNI\} \\
CK = \{DNI\} \\
}

\startEntity{Licencia}
\addEntityPk{NUMEROLICENCIA}
\addEntityPk{fechaOtorgamiento}
\addEntityPk{tipo}
\addEntityFk{DNI}
\addEntityField{fechaRenovacion}
\addEntityField{fechaVencimiento}
\addEntityField{observaciones}
\printEntity{
PK = \{(NUMEROLICENCIA, fechaOtorgamiento, tipo)\} \\
CK = \{(NUMEROLICENCIA, fechaOtorgamiento, tipo), (NUMEROLICENCIA, fechaVencimiento, tipo), (DNI, fechaOtorgamiento, tipo), (DNI, fechaVencimiento, tipo) \} \\
FK = \{DNI\} \\
}

\subsubsection*{Restricciones}
\begin{itemize}
\item \modelRestrictionShouldBeIn{Licencia.DNI}{Chofer.DNI}
\item \textit{Licencia.fechaOtorgamiento} debe ser anterior a \textit{Licencia.fechaRenovacion} 
\item \textit{Licencia.fechaRenovacion} debe ser anterior a \textit{Licencia.fechaVencimiento}
\end{itemize}

\subsection{Veh\'iculos}
Las siguientes entidades y restriccciones abarcan los requerimientos listados como 1.II

\startEntity{Vehiculo}
\addEntityPk{PATENTE}
\addEntityFk{IDMODELO}
\addEntityField{a\~no}
\addEntityField{fechaInicioServicio}
\addEntityField{capacidadDeTransporte}
\addEntityField{situacion}
\printEntity{
PK = CK = \{PATENTE\}
\\
FK = \{IDMODELO\}
}

\startEntity{VehiculoEnReparacion}
\addEntityPkFk{PATENTE}
\addEntityField{fechaIngresoTaller}
\printEntity{
PK = CK = FK = \{PATENTE\}
}

\startEntity{Modelo}
\addEntityPk{IDMODELO}
\addEntityPkFk{IDMARCA}
\addEntityField{nombre}
\printEntity{
PK = CK = \{(IDMODELO, IDMARCA)\} \\
FK = \{IDMARCA\} \\
}

\startEntity{Marca}
\addEntityPk{IDMARCA}
\addEntityField{nombre}
\printEntity{
PK = CK = \{IDMARCA\} \\
FK = \{\}
}

\subsubsection*{Restricciones}
\begin{itemize}
\item \modelRestrictionShouldBeIn{VehiculoEnUso.PATENTE}{Vehiculo.PATENTE}
\item \modelRestrictionShouldBeIn{VehiculoEnReparacion.PATENTE}{Vehiculo.PATENTE}
\item \textit{Vehiculo.ano} debe ser anterior o igual al a\~no de \textit{Vehiculo.fechaInicioServicio}
\item \modelRestrictionShouldBeInOr{Vehiculo.PATENTE}{VehiculoEnUso.PATENTE}{VehiculoEnReparacion.PATENTE}
\item \modelRestrictionShouldBePK{(Vehiculo.IDMODELO, Vehiculo.IDMARCA)}{Modelo.IDMODELO}
\item \modelRestrictionShouldBeIn{Modelo.IDMARCA}{Marca.IDMARCA}
\item El atributo \modelRestrictionField{Vehiculo.situacion} permite particionar en forma disjunta el conjunto de veh\'iculos.

\end{itemize}


\subsection{Recorridos y rutas}
Las siguientes entidades abarcan los requerimientos listados como 1.III

\startEntity{Ciudad}
\addEntityPk{IDCIUDAD}
\addEntityField{nombreCiudad}
\printEntity{
PK = CK = \{IDCIUDAD\}
}

\startEntity{Recorrido}
\addEntityPk{IDRECORRIDO}
\addEntityPkFk{IDCIUDADORIGEN}
\addEntityField{direccionOrigen}
\addEntityPkFk{IDCIUDADDESTINO}
\addEntityField{direccionDestino}
\printEntity{
PK = \{IDRECORRIDO\} \\
CK = \{IDRECORRIDO, (IDCIUDADORIGEN, direccionOrigen, IDCIUDADDESTINO, direccionDestino)\} \\
FK = \{IDCIUDADORIGEN, IDCIUDADDESTINO\}
}

\startEntity{Ruta}
\addEntityPk{IDRUTA}
\addEntityPkFk{IDRECORRIDO}
\addEntityField{longitud}
\addEntityField{tiempoEstimado}
\addEntityField{cantidadPeajes}
\addEntityField{descripcion}
\addEntityField{observaciones}
\printEntity{
PK = CK = \{(IDRUTA, IDRECORRIDO)\} \\
FK = \{ IDRECORRIDO \} \\
}

\startEntity{CondicionClimatica}
\addEntityPk{IDCONDICIONCLIMATICA}
\addEntityField{descripcion}
\printEntity{
PK = CK = \{IDCONDICIONCLIMATICA\}
}

\startEntity{PeriodoA\~no}
\addEntityPk{IDPERIODOA\~NO}
\addEntityField{descripcion}
\printEntity{
PK = CK = \{IDPERIODOA\~NO\}
}

\startEntity{SituacionClimaticaRuta}
\addEntityPk{IDRUTA}
\addEntityPk{IDPERIODOA\~NO}
\addEntityPk{IDCONDICIONCLIMATICA}
\printEntity{
PK = CK = \{ (IDRUTA, IDPERIODOA\~NO, IDCONDICIONCLIMATICA )\} \\
FK = \{ IDRUTA, IDPERIODOA\~NO, IDCONDICIONCLIMATICA \}
}

\subsubsection*{Restricciones}
\begin{itemize}
\item \modelRestrictionShouldBeIn{Recorrido.IDCIUDADORIGEN}{Ciudad.IDCIUDAD}
\item \modelRestrictionShouldBeIn{Recorrido.IDCIUDADDESTINO}{Ciudad.IDCIUDAD}
\item \modelRestrictionShouldBeIn{Ruta.IDRECORRIDO}{Recorrido.IDRECORRIDO}
\end{itemize}

\subsection{Viajes y controles}
Las siguientes entidades y restriccciones abarcan los requerimientos listados como 2.I, 2.II y 2.III

\startEntity{Viaje}
\addEntityPk{IDVIAJE}
\addEntityFk{IDVEHICULO}
\addEntityFk{IDRECORRIDO}
\addEntityField{fechaHoraPartida}
\addEntityField{fechaHoraLlegadaEstimada}
\printEntity{
PK = \{IDVIAJE\} \\
CK = \{IDVIAJE, (IDVEHICULO, fechaHoraPartida)\} \\
FK = \{IDVEHICULO, IDRECORRIDO\}
}

\startEntity{ViajeRealizado}
\addEntityPk{IDVIAJE}
\addEntityFk{IDRUTA}
\addEntityField{fechaHoraLlegada}
\addEntityField{contingencias}
\printEntity{
PK = CK = \{IDVIAJE\} \\
FK = \{IDRUTA\} \\
}

\startEntity{AsignacionChoferViaje}
\addEntityPk{IDVIAJE}
\addEntityPkFk{DNI}
\printEntity{
PK = CK=\{(DNI, IDVIAJE)\} \\
FK = \{DNI, IDVIAJE\}
}

\startEntity{TipoTest}
\addEntityPk{IDTIPOTEST}
\addEntityField{descripcion}
\printEntity{
PK = CK = \{IDTIPOTEST\}
}

\startEntity{Test}
\addEntityPkFk{IDVIAJE}
\addEntityPkFk{DNI}
\addEntityPkFk{IDTIPOTEST}
\addEntityField{fechaRealizacion}
\addEntityField{resultado}
\printEntity{
PK = CK =\{(DNI, IDVIAJE, IDTIPOTEST)\} \\
FK = \{DNI, IDVIAJE, IDTIPOTEST\}
}

\subsubsection*{Restricciones}
\begin{itemize}
\item \modelRestrictionShouldBeIn{Viaje.IDRECORRIDO}{Recorrido.IDRECORRIDO}
\item {Viaje.IDVEHICULO} debe estar en uso.
\item \modelRestrictionShouldBeIn{ViajeRealizado.IDRUTA}{Ruta.IDRUTA}
\item \modelRestrictionShouldBeIn{ViajeRealizado.IDRUTA y Viaje.IDRECORRIDO para el mismo viaje}{(Ruta.IDRUTA, Ruta.IDRECORRIDO)}
\item \modelRestrictionShouldBeIn{ViajeRealizado.IDVIAJE}{Viaje.IDVIAJE}
\item \modelRestrictionShouldBeIn{AsignacionChofer.DNI}{Chofer.DNI}
\item \modelRestrictionShouldBeIn{Test.DNI}{Chofer.DNI}
\item \modelRestrictionShouldBeIn{Test.IDTIPOTEST}{TipoTest.IDTIPOTEST}
\item \modelRestrictionShouldBeIn{Test.IDVIAJE}{Viaje.IDVIAJE}
\item la ruta de un \textit{ViajeRealizado} debe pertener al recorrido del \textit{Viaje} con el mismo IDVIAJE. 
\item \modelRestriction{AsignacionChoferViaje.IDVIAJE}{``no debe repetirse mas de tres veces''}
\item \modelRestriction{Test.fechaRealizacion}{``debe ser anterior a'' \modelRestrictionField{Viaje.fechaPartida} ``cuando'' \modelRestrictionField{Test.IDVIAJE} = \modelRestrictionField{Viaje.IDVIAJE}}
\end{itemize}


\subsection{Diagrama de Entidad-Relaci\'on}
El diagrama de entidad-relaci\'on correspondientes a las entidades descriptas en esta secci\'on se encuentra en el archivo ``ER.jpg'' de la entrega.


