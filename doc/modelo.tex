\section{Modelado}

\subsection{Choferes}
Las siguientes entidades abarcan los requerimientos listados como 1.I

\startEntity{Chofer}
\addEntityPk{DNI}
\addEntityField{apellido}
\addEntityField{nombre}
\addEntityField{fechaNacimiento}
\addEntityField{domicilio}
\addEntityField{telefono}
\printEntity{
PK = \{DNI\} \\
CK = \{DNI\} \\
}

\startEntity{Licencia}
\addEntityPk{NUMEROLICENCIA}
\addEntityPk{fechaOtorgamiento}
\addEntityPk{tipo}
\addEntityFk{DNI}
\addEntityField{fechaRenovacion}
\addEntityField{fechaVencimiento}
\addEntityField{observaciones}
\printEntity{
PK = \{(NUMEROLICENCIA, fechaOtorgamiento, tipo)\} \\
CK = \{(NUMEROLICENCIA, fechaOtorgamiento, tipo), (NUMEROLICENCIA, fechaVencimiento, tipo), (DNI, fechaOtorgamiento, tipo), (DNI, fechaVencimiento, tipo) \} \\
FK = \{DNI\} \\
}

\subsection{Veh\'iculos}
Las siguientes entidades y restriccciones abarcan los requerimientos listados como 1.II

\startEntity{Vehiculo}
\addEntityPk{PATENTE}
\addEntityFk{IDMODELO}
\addEntityField{a\~no}
\addEntityField{antiguedadEnServicio}
\addEntityField{capacidadDeTransporte}
\printEntity{
PK = CK = \{PATENTE\}
\\
FK = \{IDMODELO\}
}

\startEntity{VehiculoEnUso}
\addEntityPkFk{PATENTE}
\printEntity{
PK = CK = FK = \{PATENTE\}
}

\startEntity{VehiculoEnReparacion}
\addEntityPkFk{PATENTE}
\addEntityField{fechaIngresoTaller}
\printEntity{
PK = CK = FK = \{PATENTE\}
}

\startEntity{Modelo}
\addEntityPk{IDMODELO}
\addEntityPkFk{IDMARCA}
\addEntityField{nombre}
\printEntity{
PK = CK = \{(IDMODELO, IDMARCA)\} \\
FK = \{IDMARCA\} \\
}

\startEntity{Marca}
\addEntityPk{IDMODELO}
\addEntityField{nombre}
\printEntity{
PK = CK = \{IDMARCA\} \\
FK = \{\}
}

\subsubsection*{Restricciones}
\begin{itemize}
\item \modelRestrictionShouldBeIn{VehiculoEnUso.PATENTE}{Vehiculo.PATENTE}
\item \modelRestrictionShouldBeIn{VehiculoEnReparacion.PATENTE}{Vehiculo.PATENTE}
\item \modelRestrictionShouldBeInOr{Vehiculo.PATENTE}{VehiculoEnUso.PATENTE}{VehiculoEnReparacion.PATENTE}
\item \modelRestrictionShouldBeIn{Vehiculo.IDMODELO}{Modelo.IDMODELO}
\item \modelRestrictionShouldBeIn{Modelo.IDMARCA}{Marca.IDMARCA}
\end{itemize}


\subsection{Recorridos y rutas}
Las siguientes entidades abarcan los requerimientos listados como 1.III

\startEntity{Ciudad}
\addEntityPk{IDCIUDAD}
\addEntityField{nombre}
\printEntity{
PK = CK = \{IDCIUDAD\}
}

\startEntity{Recorrido}
\addEntityPk{IDRECORRIDO}
\addEntityPkFk{IDCIUDADORIGEN}
\addEntityField{direccionOrigen}
\addEntityPkFk{IDCIUDADDESTINO}
\addEntityField{direccionDestino}
\printEntity{
PK = \{IDRECORRIDO\} \\
CK = \{IDRECORRIDO, (IDCIUDADORIGEN, direccionOrigen, IDCIUDADDESTINO, direccionDestino)\} \\
FK = \{IDCIUDADORIGEN, IDCIUDADDESTINO\}
}

\startEntity{Ruta}
\addEntityPk{IDRUTA}
\addEntityPkFk{IDRECORRIDO}
\addEntityField{longitud}
\addEntityField{tiempoEstimado}
\addEntityField{cantidadPeajes}
\addEntityField{descripcion}
\addEntityField{observaciones}
\printEntity{
PK = CK = \{(IDRUTA, IDRECORRIDO)\} \\
FK = \{ IDRECORRIDO \} \\
}

\startEntity{CondicionClimatica}
\addEntityPk{IDCONDICIONCLIMATICA}
\addEntityField{descripcion}
\printEntity{
PK = CK = \{IDCONDICIONCLIMATICA\}
}

\startEntity{PeriodoA\~no}
\addEntityPk{IDPERIODOA\~NO}
\addEntityField{descripcion}
\printEntity{
PK = CK = \{IDPERIODOA\~NO\}
}

\startEntity{SituacionClimaticaRuta}
\addEntityPk{IDRUTA}
\addEntityPk{IDPERIODOA\~NO}
\addEntityPk{IDCONDICIONCLIMATICA}
\printEntity{
PK = CK = \{ (IDRUTA, IDPERIODOA\~NO, IDCONDICIONCLIMATICA )\} \\
FK = \{ IDRUTA, IDPERIODOA\~NO, IDCONDICIONCLIMATICA \}
}

\subsection{Viajes y controles}
Las siguientes entidades y restriccciones abarcan los requerimientos listados como 2.I, 2.II y 2.III

\startEntity{Viaje}
\addEntityPk{IDVIAJE}
\addEntityFk{IDVEHICULO}
\addEntityFk{IDRECORRIDO}
\addEntityField{fechaPartida}
\addEntityField{horaPartida}
\addEntityField{fechaLlegadaEstimada}
\addEntityField{horaLlegadaEstimada}
\printEntity{
PK = \{IDVIAJE\} \\
CK = \{IDVIAJE, (IDVEHICULO, horaPartida, fechaPartida)\} \\
FK = \{IDVEHICULO, IDRECORRIDO\}
}

\startEntity{ViajeRealizado}
\addEntityPk{IDVIAJE}
\addEntityFk{IDRUTA}
\addEntityField{fechaLlegada}
\addEntityField{horaLlegada}
\addEntityField{contingencias}
\printEntity{
PK = CK = \{IDVIAJE\} \\
FK = \{IDRUTA\} \\
}

\startEntity{AsignacionChoferViaje}
\addEntityPk{IDVIAJE}
\addEntityPkFk{DNI}
\printEntity{
PK = CK=\{(DNI, IDVIAJE)\} \\
FK = \{DNI, IDVIAJE\}
}

\startEntity{TipoTest}
\addEntityPk{IDTIPOTEST}
\addEntityField{descripcion}
\printEntity{
PK = CK = \{IDTIPOTEST\}
}

\startEntity{Test}
\addEntityPkFk{IDVIAJE}
\addEntityPkFk{DNI}
\addEntityPkFk{IDTIPOTEST}
\addEntityField{fechaRealizacion}
\addEntityField{resultado}
\printEntity{
PK = CK =\{(DNI, IDVIAJE, IDTIPOTEST)\} \\
FK = \{DNI, IDVIAJE, IDTIPOTEST\}
}

\subsubsection*{Restricciones}
\begin{itemize}
\item \modelRestriction{AsignacionChoferViaje.IDVIAJE}{``no debe repetirse mas de tres veces''}
\item \modelRestriction{Test.fechaRealizacion}{``debe ser anterior a'' \modelRestrictionField{Viaje.fechaPartida} ``cuando'' \modelRestrictionField{Test.IDVIAJE} = \modelRestrictionField{Viaje.IDVIAJE}}
\end{itemize}

